# 07. RAG и База Знаний

Обычный агент знает только то, чему его научили при тренировке (до даты cut-off). Он не знает ваши локальные инструкции типа "Как перезагружать сервер Phoenix согласно регламенту №5".

**RAG (Retrieval Augmented Generation)** — это механизм "подглядывания в шпаргалку". Агент сначала ищет информацию в базе знаний, а потом действует.

## Как работает RAG?

1. **Задача:** "Перезагрузи сервер Phoenix согласно регламенту"
2. **Мысль агента:** "Я не знаю регламент. Надо поискать"
3. **Действие:** `search_knowledge_base("Phoenix restart protocol")`
4. **Результат:** "Файл `protocols.txt`: ...сначала выключить балансировщик, потом сервер..."
5. **Мысль агента:** "Ага, понял. Сначала выключаю балансировщик..."

## Простой RAG vs Векторный поиск

В этой лабе мы реализуем **простой RAG** (поиск по ключевым словам). В продакшене используется **векторный поиск** (Semantic Search), который ищет по смыслу, а не по словам.

**Простой RAG (Lab 07):**
```go
// Поиск по вхождению подстроки
if strings.Contains(content, query) {
    return content
}
```

**Векторный поиск (продакшен):**
```go
// Документы преобразуются в векторы (embeddings)
// Поиск похожих векторов по косинусному расстоянию
similarDocs := vectorDB.Search(queryEmbedding, topK=3)
```

## Чанкинг (Chunking)

Документы разбиваются на чанки (куски) для эффективного поиска.

**Пример:**
```
Документ: "Регламент перезагрузки сервера Phoenix..."
Чанк 1: "Регламент перезагрузки сервера Phoenix: шаг 1..."
Чанк 2: "Шаг 2: Выключить балансировщик..."
Чанк 3: "Шаг 3: Перезагрузить сервер..."
```

## Что дальше?

После изучения RAG переходите к:
- **[08. Multi-Agent Systems](../08-multi-agent/README.md)** — как создать команду агентов

---

**Навигация:** [← Безопасность](../06-safety-and-hitl/README.md) | [Оглавление](../README.md) | [Multi-Agent →](../08-multi-agent/README.md)

